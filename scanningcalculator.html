<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive structured data scanning time calculator</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Style for number inputs */
        input[type="number"] {
            -moz-appearance: textfield;
        }
        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        .calc-output {
            font-weight: 600;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        <h1 class="text-3xl font-bold mb-8 text-center text-gray-900">Interactive Structured Data Scanning Time Calculator</h1>

        <!-- First Configuration Table -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden mb-12">
            <div class="p-6">
                <h2 class="text-xl font-semibold mb-4 text-gray-700">Configuration 1: 16 vCPU / 64GB RAM</h2>
                <div class="overflow-x-auto">
                    <table class="min-w-full text-sm">
                        <thead class="bg-gray-100">
                            <tr>
                                <th class="p-4 font-semibold text-left tracking-wider">Description</th>
                                <th class="p-4 font-semibold text-left tracking-wider">Value</th>
                                <th class="p-4 font-semibold text-left tracking-wider">Comment</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            <tr>
                                <td class="p-4 whitespace-nowrap">Number of nodes in cluster</td>
                                <td class="p-4 text-gray-600">
                                    <input type="number" id="nodes1" min="1" max="20" value="2" class="w-24 p-1 border rounded-md border-gray-300 focus:ring-blue-500 focus:border-blue-500">
                                </td>
                                <td class="p-4 text-gray-600">Assumes 16 vCPU/64G RAM</td>
                            </tr>
                             <tr class="bg-gray-50">
                                <td class="p-4 whitespace-nowrap">Download workers in cluster</td>
                                <td class="p-4 text-gray-600"><span id="workers1" class="calc-output"></span></td>
                                <td class="p-4 text-gray-600">-</td>
                            </tr>
                            <tr>
                                <td class="p-4 whitespace-nowrap">Low download worker rate (TB/day)</td>
                                <td class="p-4 text-gray-600">0.02</td>
                                <td class="p-4 text-gray-600">20 GB/day</td>
                            </tr>
                            <tr class="bg-gray-50">
                                <td class="p-4 whitespace-nowrap">High download worker rate (TB/day)</td>
                                <td class="p-4 text-gray-600">0.06</td>
                                <td class="p-4 text-gray-600">60 GB/day</td>
                            </tr>
                            <tr>
                                <td class="p-4 whitespace-nowrap">Low scan rate/day (TB/day)</td>
                                <td class="p-4 text-gray-600"><span id="lo_scan_rate1" class="calc-output"></span></td>
                                <td class="p-4 text-gray-600">-</td>
                            </tr>
                             <tr class="bg-gray-50">
                                <td class="p-4 whitespace-nowrap">High scan rate/day (TB/day)</td>
                                <td class="p-4 text-gray-600"><span id="hi_scan_rate1" class="calc-output"></span></td>
                                <td class="p-4 text-gray-600">-</td>
                            </tr>
                            <tr>
                                <td class="p-4 whitespace-nowrap">Dataset size (TB)</td>
                                <td class="p-4 text-gray-600">
                                    <input type="number" id="dataset_size1" value="1" min="0" step="0.1" class="w-24 p-1 border rounded-md border-gray-300 focus:ring-blue-500 focus:border-blue-500">
                                </td>
                                <td class="p-4 text-gray-600">-</td>
                            </tr>
                            <tr class="bg-gray-50">
                                <td class="p-4 whitespace-nowrap font-medium text-blue-600">Max scan time (days)</td>
                                <td class="p-4 text-gray-600"><span id="max_scan_time1" class="calc-output"></span></td>
                                <td class="p-4 text-gray-600">-</td>
                            </tr>
                            <tr>
                                <td class="p-4 whitespace-nowrap font-medium text-green-600">Min scan time (days)</td>
                                <td class="p-4 text-gray-600"><span id="min_scan_time1" class="calc-output"></span></td>
                                <td class="p-4 text-gray-600">TODO: Estimate cost for dup detection & other options</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Second Configuration Table -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden">
            <div class="p-6">
                <h2 class="text-xl font-semibold mb-4 text-gray-700">Configuration 2: 32 vCPU / 128GB RAM</h2>
                <div class="overflow-x-auto">
                     <table class="min-w-full text-sm">
                        <thead class="bg-gray-100">
                            <tr>
                                <th class="p-4 font-semibold text-left tracking-wider">Description</th>
                                <th class="p-4 font-semibold text-left tracking-wider">Value</th>
                                <th class="p-4 font-semibold text-left tracking-wider">Comment</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            <tr>
                                <td class="p-4 whitespace-nowrap">Number of nodes in cluster</td>
                                <td class="p-4 text-gray-600">
                                    <input type="number" id="nodes2" min="1" max="20" value="2" class="w-24 p-1 border rounded-md border-gray-300 focus:ring-blue-500 focus:border-blue-500">
                                </td>
                                <td class="p-4 text-gray-600">Assumes 32 vCPU/128G RAM (max 3)</td>
                            </tr>
                             <tr class="bg-gray-50">
                                <td class="p-4 whitespace-nowrap">Download workers in cluster</td>
                                <td class="p-4 text-gray-600"><span id="workers2" class="calc-output"></span></td>
                                <td class="p-4 text-gray-600">-</td>
                            </tr>
                            <tr>
                                <td class="p-4 whitespace-nowrap">Low download worker rate (TB/day)</td>
                                <td class="p-4 text-gray-600">0.02</td>
                                <td class="p-4 text-gray-600">20 GB/day/thread</td>
                            </tr>
                            <tr class="bg-gray-50">
                                <td class="p-4 whitespace-nowrap">High download worker rate (TB/day)</td>
                                <td class="p-4 text-gray-600">0.06</td>
                                <td class="p-4 text-gray-600">60 GB/day/thread best case, Sharepoint</td>
                            </tr>
                            <tr>
                                <td class="p-4 whitespace-nowrap">Low scan rate/day (TB/day)</td>
                                <td class="p-4 text-gray-600"><span id="lo_scan_rate2" class="calc-output"></span></td>
                                <td class="p-4 text-gray-600">-</td>
                            </tr>
                             <tr class="bg-gray-50">
                                <td class="p-4 whitespace-nowrap">High scan rate/day (TB/day)</td>
                                <td class="p-4 text-gray-600"><span id="hi_scan_rate2" class="calc-output"></span></td>
                                <td class="p-4 text-gray-600">-</td>
                            </tr>
                            <tr>
                                <td class="p-4 whitespace-nowrap">Dataset size (TB)</td>
                                <td class="p-4 text-gray-600">
                                    <input type="number" id="dataset_size2" value="1" min="0" step="0.1" class="w-24 p-1 border rounded-md border-gray-300 focus:ring-blue-500 focus:border-blue-500">
                                </td>
                                <td class="p-4 text-gray-600">-</td>
                            </tr>
                            <tr class="bg-gray-50">
                                <td class="p-4 whitespace-nowrap font-medium text-blue-600">Max scan time (days)</td>
                                <td class="p-4 text-gray-600"><span id="max_scan_time2" class="calc-output"></span></td>
                                <td class="p-4 text-gray-600">-</td>
                            </tr>
                            <tr>
                                <td class="p-4 whitespace-nowrap font-medium text-green-600">Min scan time (days)</td>
                                <td class="p-4 text-gray-600"><span id="min_scan_time2" class="calc-output"></span></td>
                                <td class="p-4 text-gray-600">-</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- CALCULATION LOGIC ---

        // Helper function to format numbers
        function formatNumber(num) {
            if (num === Infinity || isNaN(num) || num < 0) {
                return 'N/A';
            }
            // Use toFixed for decimal places and parseFloat to remove trailing zeros
            return parseFloat(num.toFixed(3));
        }
        
        // --- CONFIGURATION 1 ---
        function calculateConfig1() {
            // Get input values
            const nodes = parseFloat(document.getElementById('nodes1').value) || 0;
            const datasetSize = parseFloat(document.getElementById('dataset_size1').value) || 0;
            
            // Fixed values from table
            const loDownloadRate = 0.02;
            const hiDownloadRate = 0.06;

            // Perform calculations based on formulas
            const workers = nodes * 3 - 2;
            const loScanRate = loDownloadRate * workers;
            const hiScanRate = hiDownloadRate * workers;
            const maxScanTime = loScanRate > 0 ? datasetSize / loScanRate : Infinity;
            const minScanTime = hiScanRate > 0 ? datasetSize / hiScanRate : Infinity;
            
            // Update the UI with calculated values
            document.getElementById('workers1').textContent = formatNumber(workers);
            document.getElementById('lo_scan_rate1').textContent = formatNumber(loScanRate);
            document.getElementById('hi_scan_rate1').textContent = formatNumber(hiScanRate);
            document.getElementById('max_scan_time1').textContent = formatNumber(maxScanTime);
            document.getElementById('min_scan_time1').textContent = formatNumber(minScanTime);
        }
        
        // --- CONFIGURATION 2 ---
        function calculateConfig2() {
            // Get input values
            const nodes = parseFloat(document.getElementById('nodes2').value) || 0;
            const datasetSize = parseFloat(document.getElementById('dataset_size2').value) || 0;

            // Fixed values from table
            const loDownloadRate = 0.02;
            const hiDownloadRate = 0.06;

            // Perform calculations based on formulas
            const workers = nodes * 5 - 2;
            const loScanRate = loDownloadRate * workers;
            const hiScanRate = hiDownloadRate * workers;
            const maxScanTime = loScanRate > 0 ? datasetSize / loScanRate : Infinity;
            const minScanTime = hiScanRate > 0 ? datasetSize / hiScanRate : Infinity;

            // Update the UI with calculated values
            document.getElementById('workers2').textContent = formatNumber(workers);
            document.getElementById('lo_scan_rate2').textContent = formatNumber(loScanRate);
            document.getElementById('hi_scan_rate2').textContent = formatNumber(hiScanRate);
            document.getElementById('max_scan_time2').textContent = formatNumber(maxScanTime);
            document.getElementById('min_scan_time2').textContent = formatNumber(minScanTime);
        }

        // --- EVENT LISTENERS ---
        document.addEventListener('DOMContentLoaded', () => {
            // Set up event listeners for all input fields
            document.getElementById('nodes1').addEventListener('input', calculateConfig1);
            document.getElementById('dataset_size1').addEventListener('input', calculateConfig1);
            
            document.getElementById('nodes2').addEventListener('input', calculateConfig2);
            document.getElementById('dataset_size2').addEventListener('input', calculateConfig2);
            
            // Perform initial calculation on page load
            calculateConfig1();
            calculateConfig2();
        });
    </script>
</body>
</html>
